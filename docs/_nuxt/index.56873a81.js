import{_ as V}from"./PageTitle.9e7cbf1c.js";import{_ as q}from"./IntroArea.514c35e5.js";import{c as z,_ as E}from"./useCalculatorAmount.e7308b3b.js";import{y as H,U as T,r as m,q as v,V as W,j as X,C as Y,W as Z,D as i,i as P,c as r,b,w as G,a,d as A,J as w,X as N,L as I,F as x,A as C,t as y,Y as K,Z as Q,o as u,$ as ee}from"./entry.05ce73f3.js";const te={class:"shop-wrupper"},ae={class:"container"},se=a("h3",{class:"title section-title"},"products list",-1),oe={class:"pagination pagination--space-between"},ne=a("option",{value:"All",selected:""},"All",-1),le=["value"],ie=["value"],ce=a("hr",{class:"line line--shop-start"},null,-1),re={class:"shop"},ue={class:"shop__item"},pe={class:"pagination"},_e=["disabled"],de={class:"pagination__btn",disabled:""},me=["disabled"],ve=a("hr",{class:"line line--shop-end"},null,-1),xe=H({__name:"index",async setup(ge){let p,S;const O=ee(),M=[2,3,4,6,8,9,10,12,16,18,20],g=T([]),s=m(1),n=m(0),h=m(1),c=m("All"),U=v(()=>s.value*n.value),$=v(()=>U.value-n.value),f=v(()=>Math.ceil(h.value/n.value)),L=v(()=>({selectedCategory:c.value,onPage:n.value,page:s.value})),k=([p,S]=W(()=>K(O.public.baseURL+Q.categoriesPath,"$xm7HzAUDjV").then(t=>t.data.value)),p=await p,S(),p);X(()=>{n.value=z()*2,F(),_()}),Y(()=>{J()});async function _(){const{total:t,productsArray:e}=await Z(c.value,n.value,$.value);R(t),s.value>f.value&&(s.value=f.value),g.length=0,g.push(...e)}function D(){_()}function R(t){h.value!==t&&(h.value=i(t))}function B(t){localStorage.setItem("shopParams",JSON.stringify(t))}function F(){const t=localStorage.getItem("shopParams");if(t){const e=JSON.parse(t);for(let l in e)l==="selectedCategory"&&(c.value=e[l]),l==="page"&&(s.value=e[l]),l==="onPage"&&(n.value=e[l])}}function J(){localStorage.removeItem("shopParams")}return P(s,()=>_()),P(n,(t,e)=>{if(e!==0){const d=(e*s.value-e+t)/t;s.value=t<e?Math.ceil(d):Math.floor(d)}_()}),P(L,t=>B(t)),(t,e)=>{const l=V,d=q,j=E;return u(),r("main",null,[b(d,null,{page:G(()=>[b(l,{"title-text":"Shop"})]),_:1}),a("div",te,[a("div",ae,[se,a("fieldset",oe,[a("label",null,[A(" Category: "),w(a("select",{class:"pagination__category","onUpdate:modelValue":e[0]||(e[0]=o=>I(c)?c.value=o:null),onChange:D},[ne,(u(!0),r(x,null,C(i(k),o=>(u(),r("option",{value:o},y(o),9,le))),256))],544),[[N,i(c)]])]),a("label",null,[A(" Shows "),w(a("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>I(n)?n.value=o:null)},[(u(),r(x,null,C(M,o=>a("option",{value:o},y(o),9,ie)),64))],512),[[N,i(n)]])])]),ce,a("ul",re,[(u(!0),r(x,null,C(i(g),o=>(u(),r("li",ue,[b(j,{prod:o},null,8,["prod"])]))),256))]),a("fieldset",pe,[a("button",{onClick:e[2]||(e[2]=o=>s.value--),class:"pagination__btn",disabled:i(s)<=1},"Prev",8,_e),a("button",de,y(i(s)),1),a("button",{onClick:e[3]||(e[3]=o=>s.value++),class:"pagination__btn",disabled:i(s)>=i(f)},"Next",8,me)])]),ve])])}}});export{xe as default};
